<?php
/**
 * Created by PhpStorm.
 * User: Mathieu
 * Date: 13/11/2017
 * Time: 22:51
 */

namespace Repository;

use Entities\DataBase;
use PDO;

class DisplayBoard extends DataBase
{
    function findBoardById($data, $status) {
        if (isset($data["display_board"]) && isset($data["display_board"]["id"])) {
            $db = parent::$dbConnection;
            $stmt = $db->prepare("SELECT display_board.* FROM display_board INNER JOIN status ON display_board.status_id = status.id WHERE display_board.id = ? and status.name = ?");
            $stmt->bindParam(1, $data["display_board"]["id"], PDO::PARAM_INT);
            $stmt->bindParam(2, $status, PDO::PARAM_STR);
            try {
                $stmt->execute();
                $displayBoard = $stmt->fetch(PDO::FETCH_OBJ);
                return ($displayBoard);
            } catch (\PDOException $exception) {
                return ($exception);
            }
        } else {
            return null;
        }

    }
}